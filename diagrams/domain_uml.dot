@startuml

ProjectManager "1" --> "0..*" Project : manages >

Project "1" --> "0..*" Task : consistsOf >
Project --> "1" Date : creationTime
Project --> "1" Date : dueTime

Task --* "1" TaskStatus : status
Task --> "0..1" Task : alternative >
Task --> "0..*"  Task : dependsOn >
Task --> "1" TimePeriod : performedDuring >

Task ..> OngoingStatus

TimePeriod --> "1" Date : startTime
TimePeriod --> "1" Date : endTime

TaskStatus --> "knows his" Task
TaskStatus <|-- IncompleteStatus
TaskStatus <|-- PerformedStatus
IncompleteStatus <|-- OngoingStatus
IncompleteStatus <|-- ExecutingStatus
PerformedStatus <|-- FinishedStatus
PerformedStatus <|-- FailedStatus

class ProjectManager {
    Project createProject(...)
    void initialiseWith(String initFile)
}

class Project {
  String title
  String description
  Date creationTime
  Date dueTime

  void createTask(...)
}

class Task {
  String description
  double estimatedDuration
  double acceptableDeviation

  void finish(TimePeriod perfDuring)
  void fail(TimePeriod perfDuring)
}

class TaskStatus {
  Task task

  boolean isFinished()
  boolean isFailed()
}

class IncompleteStatus {
}
class ExecutingStatus {
}
class OngoingStatus {
}

class PerformedStatus {
  DateTimePeriod performedDuring
}
class FinishedStatus {
}
class FailedStatus {
  Task alternative
}

class TimePeriod {
}

class Date {
}

@enduml
